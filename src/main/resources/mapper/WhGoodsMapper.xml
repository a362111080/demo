<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="com.zero.egg.dao.WhGoodsMapper">
	<!-- 根据id查询商品信息 -->
    <select id="getGoodsInfoById" parameterType="String" resultType="com.zero.egg.model.WhGoods">
         SELECT * FROM SYS_Warehouse_product WHERE goods_id=#{goods_id}
    </select>
    
    <!-- 查询商品信息列表 -->
    <select id="GoodsList"  resultType="com.zero.egg.model.WhGoods">
         SELECT * FROM SYS_Warehouse_product 
         left join 
         where 1=1 
         <if test="searchValue !=null and searchValue !=''">
         and(
         		warehouse_name LIKE CONCAT(CONCAT('%',#{searchValue}),'%')
         		
       		)
         </if>
    </select>
    
    <!-- 查询损坏的商品信息 -->
    <select id="listDamageGoods" parameterType ="com.zero.egg.tool.PageData"  resultType="com.zero.egg.tool.PageData">
    	select * from SYS_Warehouse_goods g
    	left join SYS_damaged_goods dg on g.goods_id = dg.goods_id
    	where 1=1
    	and lng_state = 3
    	<if test="damage_type !=null and damage_type !=''">
    	and damage_type = #{damage_type}
    	</if>
    	<if test="warehouse_id !=null and warehouse_id !=''">
    	and warehouse_id = #{warehouse_id}
    	</if>
    </select>
    
    
    
    <!-- 新增商品 -->
    <insert id="addGoods" parameterType="com.zero.egg.model.WhGoods" >
     	insert into SYS_Warehouse_product 
     	(goods_id,stand_id,warehous_id,strreal_weight,lng_state,indate,resource_saler) 
     	value
     	(#{goods_id},#{stand_id},#{warehous_id},#{strreal_weight},#{lng_state},#{indate},#{resource_saler})
    </insert>
    
    <!-- 新增报损信息 -->
    <insert id="addDamageGoods" parameterType="DamageGoods" >
     	insert into SYS_damaged_goods 
     	(damage_id,goods_id,damaged_time,damaged_place,damaged_reason,recorder,record_time，damage_type) 
     	value
     	(#{damage_id},#{goods_id},#{damaged_time},#{damaged_place},#{damaged_reason},#{recorder},#{record_time},#{damage_type})
    </insert>
    
    
    <!-- 修改商品信息 -->
    <update id="updateGoods" parameterType="com.zero.egg.model.WhGoods">
    	update SYS_Warehouse_Data
    	set
    	<if test="stand_id !=null and stand_id !=''">
    	stand_id=#{stand_id},
    	</if>
    	<if test="warehous_id !=null and warehous_id !=''">
    	warehous_id=#{warehous_id},
    	</if>
    	<if test="strreal_weight !=null and strreal_weight !=''">
    	strreal_weight=#{strreal_weight},
    	</if>
    	<if test="lng_state !=null and lng_state !=''">
    	lng_state=#{lng_state},
    	</if>
    	<if test="indate !=null and indate !=''">
    	indate=#{indate}
    	</if>
    	<if test="resource_saler !=null and resource_saler !=''">
    	resource_saler=#{resource_saler}
    	</if>
    	where goods_id=#{goods_id}
    </update>
    
    
    
</mapper>